<div class="wikidoc"><h1>How to configure KiGG to use Entity Framework Repository</h1>
<h2>Introduction</h2>KiGG Entity Framework based repositories currently support 2 database engines out of the box, <i>SQL Server 2005/2008 including express editions</i> and <i>MySQL 5.1</i>. However it is possible to support any other database engine like <i>SQLite</i>, <i>VistaDB</i>, <i>Oracle</i> etc... as long as there is a .Net Data Provider that is support Entity Framework for the desired database.
<h2>Configuring connection string for KiGG database</h2>Find <i>connectionStrings</i> element and add your connection string as the following:<br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">connectionStrings</span><span style="color:Blue;">&gt;</span>
   <span style="color:Blue;">&lt;</span><span style="color:#A31515;">clear</span><span style="color:Blue;">/&gt;</span>
   <span style="color:Blue;">&lt;</span><span style="color:#A31515;">add</span> 
      <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">KiGGDatabaseConnectionStringName</span><span style="color:Black;">&quot;</span>
      <span style="color:Red;">connectionString</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Data Source=.\SQLEXPRESS;Database=KiGG;user Id=YourUserName,password=YourPassword</span><span style="color:Black;">&quot;</span>
      <span style="color:Red;">providerName</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.Data.SqlClient</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
 <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">connectionStrings</span><span style="color:Blue;">&gt;</span>
</pre></div><b>NOTE</b>: The above defined connection string is on SQL Server 2005/2008 Express Edition instance with mixed authentication using database user and password.
<h2>About KiGG design and repository providers</h2>KiGG based on totally decoupled components using IoC/DI (Inversion of Control through Dependecy Injection). The default configuration of KiGG is targetting LINQ to SQL as repository provider. However you can easly change this configuration to target any other KiGG repository provider you wish to use. Here I&#39;m going to show how to configure KiGG to user Entity Framework repository provider.
<h2>What is KiGG repository provider</h2>The term Repository Provider is my own invention, so don&#39;t take it as standard term, I use it here just to simplify the idea.<br />KiGG Repository is set of interfaces that defines how KiGG should interact and query the underlaying data storage to return KiGG domain object models such as Story model. These interfaces can be implemented using whatever you want. Currently we provide 2 implementations one based on LINQ to SQL and the other one is based on Entity Framework. I call each implementation a KiGG Repository Provider, and so we are going now to configure KiGG to use Entity Framework repository provider.<br />
<h2>About KiGG Entity Data Model (<i>EDM</i>) files (<i>CSDL</i>, <i>SSDL</i> &amp; <i>MSL</i>)</h2>Entity Framework data model files (CSDL, SSDL, &amp; MSL) should be placed under App_Data directory. Although it is possible to configure the path of these files, it is highly recommended to place them under this directory for protection. Files are:
<ol><li>DomainObjects.csdl <i>(This file should be readonly and never be modified)</i></li>
<li>DomainObjects.msl <i>(this file should be readonly and never be modified)</i></li>
<li>DomainObjects.ssdl <i>(default SSDL that tagets SQL Server .Net Data Provider)</i></li>
<li>DomainObjects.SqlServer.ssdl <i>(SSDL that tagets SQL Server .Net Data Provider)</i></li>
<li>DomainObjects.MySql.ssdl <i>(SSDL that tagets MySQL .Net Data Provider &quot;<b>Connector\net</b>&quot; )</i></li></ol>
KiGG dosen&#39;t support single <i>EDM</i> file that is normally generated by Visual Studio in order to be able to modify <i>SSDL</i> separately per .Net Data Provider.<br /><br /><b>NOTE</b>: SSDL file is modified per .Net Data Provider to basically specify the provider &amp; define proper supported storage data types which might be different between storage engines.
<h2>Mapping KiGG domain objects &amp; repository interfaces to KiGG Entity Framework provider specific types</h2>First step is to modify <b>Web.config</b> to configure Domain Objects &amp; Repository interfaces by mapping them to desired repository provider.
<h3>Registring Entity Framework repository types</h3>Open your <b>Web.config</b>. Under unity configuration section (&lt;unity&gt; Element) add type aliases to Entity Framework Repository concrete types as the following:<br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
	<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
		....
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IEFConnectionString</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.IConnectionString, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFConnectionString</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.ConnectionString, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFDomainObjectFactory</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.DomainObjects.DomainObjectFactory, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFDatabaseFactory</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.DatabaseFactory, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFUnitOfWork</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.UnitOfWork, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFUserRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.UserRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFCategoryRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.CategoryRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFTagRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.TagRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFStoryRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.StoryRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFKnownSourceRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.KnownSourceRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFCommentRepository</span><span style="color:Black;">&quot;</span>
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.CommentRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFCommentSubscribtionRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.CommentSubscribtionRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFMarkAsSpamRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.MarkAsSpamRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFStoryViewRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.StoryViewRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAlias</span> <span style="color:Red;">alias</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFVoteRepository</span><span style="color:Black;">&quot;</span> 
			<span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Kigg.EF.Repository.VoteRepository, Kigg.Infrastructure.EF</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	<span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
		<span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
                      ......
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div><br /><b>NOTE</b>: You might notice that LINQ to SQL type aliases are already defined. Don&#39;t worry, you can keep them because our aliases are different.
<h3>Mapping KiGG repository interfaces to registered Entity Framework repository provider</h3>Also under unity configuration section (&lt;unity&gt; Element) there is subelement &lt;containers&gt; where default container is defined (&lt;container&gt; element). Under default container (&lt;container&gt; element with no <i>name</i> attribute) we need to update the mappings of KiGG repository interfaces. Default configuration maps to LINQ to SQL types, we need to change these mappings to map to Entity Framwork repository types as the following:
<ul><li>Find mapping for <b>IDomainObjectFactory</b> interface and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
	  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDomainObjectFactory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFDomainObjectFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
	    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Singleton</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
	  <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div><b>NOTE</b>: <i>mapTo</i> attribute maps to <b>EFDomainObjectFactory</b> which is one of the <i>typeAliases</i> we just added in <b>Registring Entity Framework repository types</b>.<br />We will do the same with the rest of repository interfaces.<br />
<ul><li><a name="IEFConnectionString"></a> Add mapping for <b>IConnectionString</b> -<i>Which is IEFConnectionString in typeAliases defined above</i>- interface and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
	 <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IEFConnectionString</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFConnectionString</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Singleton</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">configuration</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IConfigurationManager</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">name</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.String</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">value</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.String</span><span style="color:Black;">&quot;</span> <span style="color:Red;">value</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">KiGGDatabaseConnectionStringName</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">edmFilesPath</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.String</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">value</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.String</span><span style="color:Black;">&quot;</span> <span style="color:Red;">value</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">|DataDirectory|</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ssdlFileName</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.String</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">value</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">System.String</span><span style="color:Black;">&quot;</span> <span style="color:Red;">value</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">DomainObjects.SqlServer</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div><b>NOTE</b>: In the above configuration for <b>IConnectionString</b> that maps to <b>EFConnectionString</b> Entity Framework repository type I wish to highlight the injected constructor parameters. 	
<ol><li>Parameter <b><i>configuration</i></b> is as it is, it maps to a configured <b>IConfigurationManager</b> that already maps to a concrete class that is independent from Entity Framework.</li>
<li>Parameter <b><i>name</i></b>, the value of this parameter is your database connection string name that you&#39;ll configure  under <i>connectionStrings</i> element.</li>
<li>Paremeter <b><i>edmFilesPath</i></b>, this is the physical path of csdl,ssdl and msl files path. By default all these files are under App_Data directory so the default value is &quot;<b>|Directory|</b>&quot;</li>
<li>Parameter <b><i>ssdlFileName</i></b>, this is the name of the SSDL file without extension. Because SSDL might be specific per .Net Data Provider then we had to define this as configurable parameter. The default value maps to SqlServer specific SSDL. Read <a href="https://kigg.codeplex.com/wikipage?title=Configuring%20KiGG%20to%20use%20MySQL%20Database%20through%20Entity%20Framework&referringTitle=KiGG%20Entity%20Framework%20Configuration">this article for MySql configuration</a>.</li></ol>

<ul><li>Find mapping for <b>IDatabaseFactory</b> interface and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
	  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span>
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">connectionString</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IEFConnectionString</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Async</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Singleton</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">connectionString</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IEFConnectionString</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div><b>Note</b>: There are 2 mappings above, default one has no name and the other is has Async as a name, both are for <b>IDatabaseFactory</b> and must be changed.<br />
<ul><li>Find mapping for <b>IUnitOfWork</b> interface and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
	  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IUnitOfWork</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFUnitOfWork</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Async</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IUnitOfWork</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFUnitOfWork</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Singleton</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Async</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Add the following type mappings -<i>Note that they all have name set to &quot;EntityFramework&quot;</i>-:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
	  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IUserRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">UserRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ICategoryRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFCategoryRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ITagRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFTagRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IStoryRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFStoryRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Find mapping for <b>IUserRepository</b>, <b>ICategoryRepository</b>, <b>ITagRepository</b> &amp; <b>IStoryRepository</b> with <i>name</i>=&quot;<b>Logging</b>&quot; and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Logging</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IUserRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">LoggingUserRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">innerRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IUserRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Logging</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ICategoryRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">LoggingCategoryRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">innerRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ICategoryRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Logging</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ITagRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">LoggingTagRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">innerRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ITagRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Logging</span><span style="color:Black;">&quot;</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IStoryRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">LoggingStoryRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">innerRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IStoryRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EntityFramework</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div><b>Note</b>: The Contructor parameter <i>innerRepository</i> in all mappings above has a dependency on <i>EntityFramework</i> type defined in previous step. The &lt;dependency&gt; element instructs the constructor to use the defined <i>EntityFramework</i> type by specifying <i>name</i> attribute of &lt;dependency&gt; element.<br />
<ul><li>Find mapping for <b>IKnownSourceRepository</b> and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IKnownSourceRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFKnownSourceRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Find mapping for <b>ICommentRepository</b> and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ICommentRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFCommentRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Find mapping for <b>ICommentSubscribtionRepository</b> and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">ICommentSubscribtionRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFCommentSubscribtionRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Find mapping for <b>IMarkAsSpamRepository</b> and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IMarkAsSpamRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFMarkAsSpamRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Find mapping for <b>IStoryViewRepository</b> and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IStoryViewRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFStoryViewRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<ul><li>Find mapping for <b>IVoteRepository</b> and change it:</li></ul>
<div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
	....
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeAliases</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>
	  ....
          <span style="color:Blue;">&lt;</span><span style="color:#A31515;">type</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IVoteRepository</span><span style="color:Black;">&quot;</span> <span style="color:Red;">mapTo</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">EFVoteRepository</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">lifetime</span> <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">PerWebRequest</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
            <span style="color:Blue;">&lt;</span><span style="color:#A31515;">typeConfig</span> 
            <span style="color:Red;">extensionType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
                <span style="color:Blue;">&lt;</span><span style="color:#A31515;">param</span> <span style="color:Red;">name</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">factory</span><span style="color:Black;">&quot;</span> <span style="color:Red;">parameterType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IDatabaseFactory</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
                  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">dependency</span><span style="color:Blue;">/&gt;</span>
                <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">param</span><span style="color:Blue;">&gt;</span>
              <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">constructor</span><span style="color:Blue;">&gt;</span>
            <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">typeConfig</span><span style="color:Blue;">&gt;</span>
          <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">type</span><span style="color:Blue;">&gt;</span>
	  ....
	<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">types</span><span style="color:Blue;">&gt;</span>		
     <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">container</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">containers</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">unity</span><span style="color:Blue;">&gt;</span>
</pre></div>
<h2>Configuring KiGG to use MySQL</h2>To configure KiGG to use MySQL read <a href="https://kigg.codeplex.com/wikipage?title=Configuring%20KiGG%20to%20use%20MySQL%20Database%20through%20Entity%20Framework&referringTitle=KiGG%20Entity%20Framework%20Configuration">this article</a></div><div class="ClearBoth"></div>